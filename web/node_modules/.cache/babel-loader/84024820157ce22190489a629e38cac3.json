{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport contains from \"rc-util/es/Dom/contains\";\nimport Animate from 'rc-animate';\nimport LazyRenderBox from './LazyRenderBox';\nvar uuid = 0;\n/* eslint react/no-is-mounted:0 */\n\nfunction getScroll(w, top) {\n  var ret = w[\"page\".concat(top ? 'Y' : 'X', \"Offset\")];\n  var method = \"scroll\".concat(top ? 'Top' : 'Left');\n\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    ret = d.documentElement[method];\n\n    if (typeof ret !== 'number') {\n      ret = d.body[method];\n    }\n  }\n\n  return ret;\n}\n\nfunction setTransformOrigin(node, value) {\n  var style = node.style;\n  ['Webkit', 'Moz', 'Ms', 'ms'].forEach(function (prefix) {\n    style[\"\".concat(prefix, \"TransformOrigin\")] = value;\n  });\n  style.transformOrigin = value;\n}\n\nfunction offset(el) {\n  var rect = el.getBoundingClientRect();\n  var pos = {\n    left: rect.left,\n    top: rect.top\n  };\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScroll(w);\n  pos.top += getScroll(w, true);\n  return pos;\n}\n\nvar Dialog = /*#__PURE__*/function (_React$Component) {\n  _inherits(Dialog, _React$Component);\n\n  var _super = _createSuper(Dialog);\n\n  function Dialog(props) {\n    var _this;\n\n    _classCallCheck(this, Dialog);\n\n    _this = _super.call(this, props);\n    _this.inTransition = false;\n\n    _this.onAnimateLeave = function () {\n      var _this$props = _this.props,\n          afterClose = _this$props.afterClose,\n          getOpenCount = _this$props.getOpenCount,\n          focusTriggerAfterClose = _this$props.focusTriggerAfterClose,\n          mask = _this$props.mask; // need demo?\n      // https://github.com/react-component/dialog/pull/28\n\n      if (_this.wrap) {\n        _this.wrap.style.display = 'none';\n      }\n\n      _this.inTransition = false; // 如果没有打开的状态，则清除 effect 和 overflow: hidden;\n      // https://github.com/ant-design/ant-design/issues/21539\n\n      if (!getOpenCount()) {\n        _this.switchScrollingEffect();\n      }\n\n      if (mask && _this.lastOutSideFocusNode && focusTriggerAfterClose) {\n        try {\n          _this.lastOutSideFocusNode.focus();\n        } catch (e) {\n          _this.lastOutSideFocusNode = null;\n        }\n\n        _this.lastOutSideFocusNode = null;\n      }\n\n      if (afterClose) {\n        afterClose();\n      }\n    };\n\n    _this.onDialogMouseDown = function () {\n      _this.dialogMouseDown = true;\n    };\n\n    _this.onMaskMouseUp = function () {\n      if (_this.dialogMouseDown) {\n        _this.timeoutId = setTimeout(function () {\n          _this.dialogMouseDown = false;\n        }, 0);\n      }\n    };\n\n    _this.onMaskClick = function (e) {\n      // android trigger click on open (fastclick??)\n      if (Date.now() - _this.openTime < 300) {\n        return;\n      }\n\n      if (e.target === e.currentTarget && !_this.dialogMouseDown) {\n        _this.close(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      var _this$props2 = _this.props,\n          keyboard = _this$props2.keyboard,\n          visible = _this$props2.visible;\n\n      if (keyboard && e.keyCode === KeyCode.ESC) {\n        e.stopPropagation();\n\n        _this.close(e);\n\n        return;\n      } // keep focus inside dialog\n\n\n      if (visible) {\n        if (e.keyCode === KeyCode.TAB) {\n          var _document = document,\n              activeElement = _document.activeElement;\n\n          if (e.shiftKey) {\n            if (activeElement === _this.sentinelStart) {\n              _this.sentinelEnd.focus();\n            }\n          } else if (activeElement === _this.sentinelEnd) {\n            _this.sentinelStart.focus();\n          }\n        }\n      }\n    };\n\n    _this.getDialogElement = function () {\n      var _this$props3 = _this.props,\n          closable = _this$props3.closable,\n          prefixCls = _this$props3.prefixCls,\n          width = _this$props3.width,\n          height = _this$props3.height,\n          footer = _this$props3.footer,\n          title = _this$props3.title,\n          closeIcon = _this$props3.closeIcon,\n          style = _this$props3.style,\n          className = _this$props3.className,\n          visible = _this$props3.visible,\n          forceRender = _this$props3.forceRender,\n          bodyStyle = _this$props3.bodyStyle,\n          bodyProps = _this$props3.bodyProps,\n          children = _this$props3.children,\n          destroyOnClose = _this$props3.destroyOnClose,\n          modalRender = _this$props3.modalRender;\n      var dest = {};\n\n      if (width !== undefined) {\n        dest.width = width;\n      }\n\n      if (height !== undefined) {\n        dest.height = height;\n      }\n\n      var footerNode;\n\n      if (footer) {\n        footerNode = React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-footer\"),\n          ref: _this.saveRef('footer')\n        }, footer);\n      }\n\n      var headerNode;\n\n      if (title) {\n        headerNode = React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-header\"),\n          ref: _this.saveRef('header')\n        }, React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-title\"),\n          id: _this.titleId\n        }, title));\n      }\n\n      var closer;\n\n      if (closable) {\n        closer = React.createElement(\"button\", {\n          type: \"button\",\n          onClick: _this.close,\n          \"aria-label\": \"Close\",\n          className: \"\".concat(prefixCls, \"-close\")\n        }, closeIcon || React.createElement(\"span\", {\n          className: \"\".concat(prefixCls, \"-close-x\")\n        }));\n      }\n\n      var content = React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content\")\n      }, closer, headerNode, React.createElement(\"div\", Object.assign({\n        className: \"\".concat(prefixCls, \"-body\"),\n        style: bodyStyle,\n        ref: _this.saveRef('body')\n      }, bodyProps), children), footerNode);\n\n      var styleBox = _objectSpread(_objectSpread({}, style), dest);\n\n      var sentinelStyle = {\n        width: 0,\n        height: 0,\n        overflow: 'hidden',\n        outline: 'none'\n      };\n\n      var transitionName = _this.getTransitionName();\n\n      var dialogElement = React.createElement(LazyRenderBox, {\n        key: \"dialog-element\",\n        role: \"document\",\n        ref: _this.saveRef('dialog'),\n        style: styleBox,\n        className: \"\".concat(prefixCls, \" \").concat(className || ''),\n        visible: visible,\n        forceRender: forceRender,\n        onMouseDown: _this.onDialogMouseDown\n      }, React.createElement(\"div\", {\n        tabIndex: 0,\n        ref: _this.saveRef('sentinelStart'),\n        style: sentinelStyle,\n        \"aria-hidden\": \"true\"\n      }), modalRender ? modalRender(content) : content, React.createElement(\"div\", {\n        tabIndex: 0,\n        ref: _this.saveRef('sentinelEnd'),\n        style: sentinelStyle,\n        \"aria-hidden\": \"true\"\n      }));\n      return React.createElement(Animate, {\n        key: \"dialog\",\n        showProp: \"visible\",\n        onLeave: _this.onAnimateLeave,\n        transitionName: transitionName,\n        component: \"\",\n        transitionAppear: true\n      }, visible || !destroyOnClose ? dialogElement : null);\n    };\n\n    _this.getZIndexStyle = function () {\n      var style = {};\n      var zIndex = _this.props.zIndex;\n\n      if (zIndex !== undefined) {\n        style.zIndex = zIndex;\n      }\n\n      return style;\n    };\n\n    _this.getWrapStyle = function () {\n      return _objectSpread(_objectSpread({}, _this.getZIndexStyle()), _this.props.wrapStyle);\n    };\n\n    _this.getMaskStyle = function () {\n      return _objectSpread(_objectSpread({}, _this.getZIndexStyle()), _this.props.maskStyle);\n    };\n\n    _this.getMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible,\n          maskProps = _this$props4.maskProps;\n      var maskElement;\n\n      if (mask) {\n        var maskTransition = _this.getMaskTransitionName();\n\n        maskElement = React.createElement(LazyRenderBox, Object.assign({\n          style: _this.getMaskStyle(),\n          key: \"mask\",\n          className: \"\".concat(prefixCls, \"-mask\"),\n          hiddenClassName: \"\".concat(prefixCls, \"-mask-hidden\"),\n          visible: visible\n        }, maskProps));\n\n        if (maskTransition) {\n          maskElement = React.createElement(Animate, {\n            key: \"mask\",\n            showProp: \"visible\",\n            transitionAppear: true,\n            component: \"\",\n            transitionName: maskTransition\n          }, maskElement);\n        }\n      }\n\n      return maskElement;\n    };\n\n    _this.getMaskTransitionName = function () {\n      var _this$props5 = _this.props,\n          maskTransitionName = _this$props5.maskTransitionName,\n          maskAnimation = _this$props5.maskAnimation,\n          prefixCls = _this$props5.prefixCls;\n      var transitionName = maskTransitionName;\n      var animation = maskAnimation;\n\n      if (!transitionName && animation) {\n        transitionName = \"\".concat(prefixCls, \"-\").concat(animation);\n      }\n\n      return transitionName;\n    };\n\n    _this.getTransitionName = function () {\n      var _this$props6 = _this.props,\n          transitionName = _this$props6.transitionName,\n          animation = _this$props6.animation,\n          prefixCls = _this$props6.prefixCls;\n      var transitionNameResult = transitionName;\n\n      if (!transitionName && animation) {\n        transitionNameResult = \"\".concat(prefixCls, \"-\").concat(animation);\n      }\n\n      return transitionNameResult;\n    };\n\n    _this.close = function (e) {\n      var onClose = _this.props.onClose;\n\n      if (onClose) {\n        onClose(e);\n      }\n    };\n\n    _this.saveRef = function (name) {\n      return function (node) {\n        _this[name] = node;\n      };\n    };\n\n    _this.titleId = \"rcDialogTitle\".concat(uuid);\n    uuid += 1;\n\n    _this.switchScrollingEffect = props.switchScrollingEffect || function () {};\n\n    return _this;\n  }\n\n  _createClass(Dialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate({}); // if forceRender is true, set element style display to be none;\n\n      if (this.props.forceRender && this.props.visible) {\n        return;\n      }\n\n      if ((this.props.forceRender || this.props.getContainer === false && !this.props.visible) && this.wrap) {\n        this.wrap.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props7 = this.props,\n          visible = _this$props7.visible,\n          mousePosition = _this$props7.mousePosition;\n\n      if (visible) {\n        // first show\n        if (!prevProps.visible) {\n          this.openTime = Date.now();\n          this.switchScrollingEffect();\n          this.tryFocus(); // eslint-disable-next-line react/no-find-dom-node\n\n          var dialogNode = ReactDOM.findDOMNode(this.dialog);\n\n          if (mousePosition) {\n            var elOffset = offset(dialogNode);\n            setTransformOrigin(dialogNode, \"\".concat(mousePosition.x - elOffset.left, \"px \").concat(mousePosition.y - elOffset.top, \"px\"));\n          } else {\n            setTransformOrigin(dialogNode, '');\n          }\n        }\n      } else if (prevProps.visible) {\n        this.inTransition = true;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props8 = this.props,\n          visible = _this$props8.visible,\n          getOpenCount = _this$props8.getOpenCount;\n\n      if ((visible || this.inTransition) && !getOpenCount()) {\n        this.switchScrollingEffect();\n      }\n\n      clearTimeout(this.timeoutId);\n    }\n  }, {\n    key: \"tryFocus\",\n    value: function tryFocus() {\n      if (!contains(this.wrap, document.activeElement)) {\n        this.lastOutSideFocusNode = document.activeElement;\n        this.sentinelStart.focus();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n      var prefixCls = props.prefixCls,\n          maskClosable = props.maskClosable;\n      var style = this.getWrapStyle(); // clear hide display\n      // and only set display after async anim, not here for hide\n\n      if (props.visible) {\n        style.display = null;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-root\")\n      }, this.getMaskElement(), React.createElement(\"div\", Object.assign({\n        tabIndex: -1,\n        onKeyDown: this.onKeyDown,\n        className: \"\".concat(prefixCls, \"-wrap \").concat(props.wrapClassName || ''),\n        ref: this.saveRef('wrap'),\n        onClick: maskClosable ? this.onMaskClick : null,\n        onMouseUp: maskClosable ? this.onMaskMouseUp : null,\n        role: \"dialog\",\n        \"aria-labelledby\": props.title ? this.titleId : null,\n        style: style\n      }, props.wrapProps), this.getDialogElement()));\n    }\n  }]);\n\n  return Dialog;\n}(React.Component);\n\nexport { Dialog as default };\nDialog.defaultProps = {\n  className: '',\n  mask: true,\n  visible: false,\n  keyboard: true,\n  closable: true,\n  maskClosable: true,\n  destroyOnClose: false,\n  prefixCls: 'rc-dialog',\n  focusTriggerAfterClose: true\n};","map":{"version":3,"sources":["/Users/toan/Code/ued_danang/web/node_modules/rc-image/node_modules/rc-dialog/es/Dialog.js"],"names":["_objectSpread","_classCallCheck","_createClass","_inherits","_createSuper","React","ReactDOM","KeyCode","contains","Animate","LazyRenderBox","uuid","getScroll","w","top","ret","concat","method","d","document","documentElement","body","setTransformOrigin","node","value","style","forEach","prefix","transformOrigin","offset","el","rect","getBoundingClientRect","pos","left","doc","ownerDocument","defaultView","parentWindow","Dialog","_React$Component","_super","props","_this","call","inTransition","onAnimateLeave","_this$props","afterClose","getOpenCount","focusTriggerAfterClose","mask","wrap","display","switchScrollingEffect","lastOutSideFocusNode","focus","e","onDialogMouseDown","dialogMouseDown","onMaskMouseUp","timeoutId","setTimeout","onMaskClick","Date","now","openTime","target","currentTarget","close","onKeyDown","_this$props2","keyboard","visible","keyCode","ESC","stopPropagation","TAB","_document","activeElement","shiftKey","sentinelStart","sentinelEnd","getDialogElement","_this$props3","closable","prefixCls","width","height","footer","title","closeIcon","className","forceRender","bodyStyle","bodyProps","children","destroyOnClose","modalRender","dest","undefined","footerNode","createElement","ref","saveRef","headerNode","id","titleId","closer","type","onClick","content","Object","assign","styleBox","sentinelStyle","overflow","outline","transitionName","getTransitionName","dialogElement","key","role","onMouseDown","tabIndex","showProp","onLeave","component","transitionAppear","getZIndexStyle","zIndex","getWrapStyle","wrapStyle","getMaskStyle","maskStyle","getMaskElement","_this$props4","maskProps","maskElement","maskTransition","getMaskTransitionName","hiddenClassName","_this$props5","maskTransitionName","maskAnimation","animation","_this$props6","transitionNameResult","onClose","name","componentDidMount","componentDidUpdate","getContainer","prevProps","_this$props7","mousePosition","tryFocus","dialogNode","findDOMNode","dialog","elOffset","x","y","componentWillUnmount","_this$props8","clearTimeout","render","maskClosable","wrapClassName","onMouseUp","wrapProps","Component","default","defaultProps"],"mappings":"AAAA,OAAOA,aAAP,MAA0B,0CAA1B;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,QAAZ,MAA0B,WAA1B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,IAAIC,IAAI,GAAG,CAAX;AACA;;AAEA,SAASC,SAAT,CAAmBC,CAAnB,EAAsBC,GAAtB,EAA2B;AACzB,MAAIC,GAAG,GAAGF,CAAC,CAAC,OAAOG,MAAP,CAAcF,GAAG,GAAG,GAAH,GAAS,GAA1B,EAA+B,QAA/B,CAAD,CAAX;AACA,MAAIG,MAAM,GAAG,SAASD,MAAT,CAAgBF,GAAG,GAAG,KAAH,GAAW,MAA9B,CAAb;;AAEA,MAAI,OAAOC,GAAP,KAAe,QAAnB,EAA6B;AAC3B,QAAIG,CAAC,GAAGL,CAAC,CAACM,QAAV;AACAJ,IAAAA,GAAG,GAAGG,CAAC,CAACE,eAAF,CAAkBH,MAAlB,CAAN;;AAEA,QAAI,OAAOF,GAAP,KAAe,QAAnB,EAA6B;AAC3BA,MAAAA,GAAG,GAAGG,CAAC,CAACG,IAAF,CAAOJ,MAAP,CAAN;AACD;AACF;;AAED,SAAOF,GAAP;AACD;;AAED,SAASO,kBAAT,CAA4BC,IAA5B,EAAkCC,KAAlC,EAAyC;AACvC,MAAIC,KAAK,GAAGF,IAAI,CAACE,KAAjB;AACA,GAAC,QAAD,EAAW,KAAX,EAAkB,IAAlB,EAAwB,IAAxB,EAA8BC,OAA9B,CAAsC,UAAUC,MAAV,EAAkB;AACtDF,IAAAA,KAAK,CAAC,GAAGT,MAAH,CAAUW,MAAV,EAAkB,iBAAlB,CAAD,CAAL,GAA8CH,KAA9C;AACD,GAFD;AAGAC,EAAAA,KAAK,CAACG,eAAN,GAAwBJ,KAAxB;AACD;;AAED,SAASK,MAAT,CAAgBC,EAAhB,EAAoB;AAClB,MAAIC,IAAI,GAAGD,EAAE,CAACE,qBAAH,EAAX;AACA,MAAIC,GAAG,GAAG;AACRC,IAAAA,IAAI,EAAEH,IAAI,CAACG,IADH;AAERpB,IAAAA,GAAG,EAAEiB,IAAI,CAACjB;AAFF,GAAV;AAIA,MAAIqB,GAAG,GAAGL,EAAE,CAACM,aAAb;AACA,MAAIvB,CAAC,GAAGsB,GAAG,CAACE,WAAJ,IAAmBF,GAAG,CAACG,YAA/B;AACAL,EAAAA,GAAG,CAACC,IAAJ,IAAYtB,SAAS,CAACC,CAAD,CAArB;AACAoB,EAAAA,GAAG,CAACnB,GAAJ,IAAWF,SAAS,CAACC,CAAD,EAAI,IAAJ,CAApB;AACA,SAAOoB,GAAP;AACD;;AAED,IAAIM,MAAM,GAAG,aAAa,UAAUC,gBAAV,EAA4B;AACpDrC,EAAAA,SAAS,CAACoC,MAAD,EAASC,gBAAT,CAAT;;AAEA,MAAIC,MAAM,GAAGrC,YAAY,CAACmC,MAAD,CAAzB;;AAEA,WAASA,MAAT,CAAgBG,KAAhB,EAAuB;AACrB,QAAIC,KAAJ;;AAEA1C,IAAAA,eAAe,CAAC,IAAD,EAAOsC,MAAP,CAAf;;AAEAI,IAAAA,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBF,KAAlB,CAAR;AACAC,IAAAA,KAAK,CAACE,YAAN,GAAqB,KAArB;;AAEAF,IAAAA,KAAK,CAACG,cAAN,GAAuB,YAAY;AACjC,UAAIC,WAAW,GAAGJ,KAAK,CAACD,KAAxB;AAAA,UACIM,UAAU,GAAGD,WAAW,CAACC,UAD7B;AAAA,UAEIC,YAAY,GAAGF,WAAW,CAACE,YAF/B;AAAA,UAGIC,sBAAsB,GAAGH,WAAW,CAACG,sBAHzC;AAAA,UAIIC,IAAI,GAAGJ,WAAW,CAACI,IAJvB,CADiC,CAKJ;AAC7B;;AAEA,UAAIR,KAAK,CAACS,IAAV,EAAgB;AACdT,QAAAA,KAAK,CAACS,IAAN,CAAW3B,KAAX,CAAiB4B,OAAjB,GAA2B,MAA3B;AACD;;AAEDV,MAAAA,KAAK,CAACE,YAAN,GAAqB,KAArB,CAZiC,CAYL;AAC5B;;AAEA,UAAI,CAACI,YAAY,EAAjB,EAAqB;AACnBN,QAAAA,KAAK,CAACW,qBAAN;AACD;;AAED,UAAIH,IAAI,IAAIR,KAAK,CAACY,oBAAd,IAAsCL,sBAA1C,EAAkE;AAChE,YAAI;AACFP,UAAAA,KAAK,CAACY,oBAAN,CAA2BC,KAA3B;AACD,SAFD,CAEE,OAAOC,CAAP,EAAU;AACVd,UAAAA,KAAK,CAACY,oBAAN,GAA6B,IAA7B;AACD;;AAEDZ,QAAAA,KAAK,CAACY,oBAAN,GAA6B,IAA7B;AACD;;AAED,UAAIP,UAAJ,EAAgB;AACdA,QAAAA,UAAU;AACX;AACF,KAhCD;;AAkCAL,IAAAA,KAAK,CAACe,iBAAN,GAA0B,YAAY;AACpCf,MAAAA,KAAK,CAACgB,eAAN,GAAwB,IAAxB;AACD,KAFD;;AAIAhB,IAAAA,KAAK,CAACiB,aAAN,GAAsB,YAAY;AAChC,UAAIjB,KAAK,CAACgB,eAAV,EAA2B;AACzBhB,QAAAA,KAAK,CAACkB,SAAN,GAAkBC,UAAU,CAAC,YAAY;AACvCnB,UAAAA,KAAK,CAACgB,eAAN,GAAwB,KAAxB;AACD,SAF2B,EAEzB,CAFyB,CAA5B;AAGD;AACF,KAND;;AAQAhB,IAAAA,KAAK,CAACoB,WAAN,GAAoB,UAAUN,CAAV,EAAa;AAC/B;AACA,UAAIO,IAAI,CAACC,GAAL,KAAatB,KAAK,CAACuB,QAAnB,GAA8B,GAAlC,EAAuC;AACrC;AACD;;AAED,UAAIT,CAAC,CAACU,MAAF,KAAaV,CAAC,CAACW,aAAf,IAAgC,CAACzB,KAAK,CAACgB,eAA3C,EAA4D;AAC1DhB,QAAAA,KAAK,CAAC0B,KAAN,CAAYZ,CAAZ;AACD;AACF,KATD;;AAWAd,IAAAA,KAAK,CAAC2B,SAAN,GAAkB,UAAUb,CAAV,EAAa;AAC7B,UAAIc,YAAY,GAAG5B,KAAK,CAACD,KAAzB;AAAA,UACI8B,QAAQ,GAAGD,YAAY,CAACC,QAD5B;AAAA,UAEIC,OAAO,GAAGF,YAAY,CAACE,OAF3B;;AAIA,UAAID,QAAQ,IAAIf,CAAC,CAACiB,OAAF,KAAcnE,OAAO,CAACoE,GAAtC,EAA2C;AACzClB,QAAAA,CAAC,CAACmB,eAAF;;AAEAjC,QAAAA,KAAK,CAAC0B,KAAN,CAAYZ,CAAZ;;AAEA;AACD,OAX4B,CAW3B;;;AAGF,UAAIgB,OAAJ,EAAa;AACX,YAAIhB,CAAC,CAACiB,OAAF,KAAcnE,OAAO,CAACsE,GAA1B,EAA+B;AAC7B,cAAIC,SAAS,GAAG3D,QAAhB;AAAA,cACI4D,aAAa,GAAGD,SAAS,CAACC,aAD9B;;AAGA,cAAItB,CAAC,CAACuB,QAAN,EAAgB;AACd,gBAAID,aAAa,KAAKpC,KAAK,CAACsC,aAA5B,EAA2C;AACzCtC,cAAAA,KAAK,CAACuC,WAAN,CAAkB1B,KAAlB;AACD;AACF,WAJD,MAIO,IAAIuB,aAAa,KAAKpC,KAAK,CAACuC,WAA5B,EAAyC;AAC9CvC,YAAAA,KAAK,CAACsC,aAAN,CAAoBzB,KAApB;AACD;AACF;AACF;AACF,KA5BD;;AA8BAb,IAAAA,KAAK,CAACwC,gBAAN,GAAyB,YAAY;AACnC,UAAIC,YAAY,GAAGzC,KAAK,CAACD,KAAzB;AAAA,UACI2C,QAAQ,GAAGD,YAAY,CAACC,QAD5B;AAAA,UAEIC,SAAS,GAAGF,YAAY,CAACE,SAF7B;AAAA,UAGIC,KAAK,GAAGH,YAAY,CAACG,KAHzB;AAAA,UAIIC,MAAM,GAAGJ,YAAY,CAACI,MAJ1B;AAAA,UAKIC,MAAM,GAAGL,YAAY,CAACK,MAL1B;AAAA,UAMIC,KAAK,GAAGN,YAAY,CAACM,KANzB;AAAA,UAOIC,SAAS,GAAGP,YAAY,CAACO,SAP7B;AAAA,UAQIlE,KAAK,GAAG2D,YAAY,CAAC3D,KARzB;AAAA,UASImE,SAAS,GAAGR,YAAY,CAACQ,SAT7B;AAAA,UAUInB,OAAO,GAAGW,YAAY,CAACX,OAV3B;AAAA,UAWIoB,WAAW,GAAGT,YAAY,CAACS,WAX/B;AAAA,UAYIC,SAAS,GAAGV,YAAY,CAACU,SAZ7B;AAAA,UAaIC,SAAS,GAAGX,YAAY,CAACW,SAb7B;AAAA,UAcIC,QAAQ,GAAGZ,YAAY,CAACY,QAd5B;AAAA,UAeIC,cAAc,GAAGb,YAAY,CAACa,cAflC;AAAA,UAgBIC,WAAW,GAAGd,YAAY,CAACc,WAhB/B;AAiBA,UAAIC,IAAI,GAAG,EAAX;;AAEA,UAAIZ,KAAK,KAAKa,SAAd,EAAyB;AACvBD,QAAAA,IAAI,CAACZ,KAAL,GAAaA,KAAb;AACD;;AAED,UAAIC,MAAM,KAAKY,SAAf,EAA0B;AACxBD,QAAAA,IAAI,CAACX,MAAL,GAAcA,MAAd;AACD;;AAED,UAAIa,UAAJ;;AAEA,UAAIZ,MAAJ,EAAY;AACVY,QAAAA,UAAU,GAAGhG,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AACtCV,UAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,SAArB,CAD2B;AAEtCiB,UAAAA,GAAG,EAAE5D,KAAK,CAAC6D,OAAN,CAAc,QAAd;AAFiC,SAA3B,EAGVf,MAHU,CAAb;AAID;;AAED,UAAIgB,UAAJ;;AAEA,UAAIf,KAAJ,EAAW;AACTe,QAAAA,UAAU,GAAGpG,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AACtCV,UAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,SAArB,CAD2B;AAEtCiB,UAAAA,GAAG,EAAE5D,KAAK,CAAC6D,OAAN,CAAc,QAAd;AAFiC,SAA3B,EAGVnG,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AAC5BV,UAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,QAArB,CADiB;AAE5BoB,UAAAA,EAAE,EAAE/D,KAAK,CAACgE;AAFkB,SAA3B,EAGAjB,KAHA,CAHU,CAAb;AAOD;;AAED,UAAIkB,MAAJ;;AAEA,UAAIvB,QAAJ,EAAc;AACZuB,QAAAA,MAAM,GAAGvG,KAAK,CAACiG,aAAN,CAAoB,QAApB,EAA8B;AACrCO,UAAAA,IAAI,EAAE,QAD+B;AAErCC,UAAAA,OAAO,EAAEnE,KAAK,CAAC0B,KAFsB;AAGrC,wBAAc,OAHuB;AAIrCuB,UAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,QAArB;AAJ0B,SAA9B,EAKNK,SAAS,IAAItF,KAAK,CAACiG,aAAN,CAAoB,MAApB,EAA4B;AAC1CV,UAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,UAArB;AAD+B,SAA5B,CALP,CAAT;AAQD;;AAED,UAAIyB,OAAO,GAAG1G,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AACvCV,QAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,UAArB;AAD4B,OAA3B,EAEXsB,MAFW,EAEHH,UAFG,EAESpG,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2BU,MAAM,CAACC,MAAP,CAAc;AAC9DrB,QAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,OAArB,CADmD;AAE9D7D,QAAAA,KAAK,EAAEqE,SAFuD;AAG9DS,QAAAA,GAAG,EAAE5D,KAAK,CAAC6D,OAAN,CAAc,MAAd;AAHyD,OAAd,EAI/CT,SAJ+C,CAA3B,EAIRC,QAJQ,CAFT,EAMYK,UANZ,CAAd;;AAQA,UAAIa,QAAQ,GAAGlH,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKyB,KAAL,CAAd,EAA2B0E,IAA3B,CAA5B;;AAEA,UAAIgB,aAAa,GAAG;AAClB5B,QAAAA,KAAK,EAAE,CADW;AAElBC,QAAAA,MAAM,EAAE,CAFU;AAGlB4B,QAAAA,QAAQ,EAAE,QAHQ;AAIlBC,QAAAA,OAAO,EAAE;AAJS,OAApB;;AAOA,UAAIC,cAAc,GAAG3E,KAAK,CAAC4E,iBAAN,EAArB;;AAEA,UAAIC,aAAa,GAAGnH,KAAK,CAACiG,aAAN,CAAoB5F,aAApB,EAAmC;AACrD+G,QAAAA,GAAG,EAAE,gBADgD;AAErDC,QAAAA,IAAI,EAAE,UAF+C;AAGrDnB,QAAAA,GAAG,EAAE5D,KAAK,CAAC6D,OAAN,CAAc,QAAd,CAHgD;AAIrD/E,QAAAA,KAAK,EAAEyF,QAJ8C;AAKrDtB,QAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,GAArB,EAA0BtE,MAA1B,CAAiC4E,SAAS,IAAI,EAA9C,CAL0C;AAMrDnB,QAAAA,OAAO,EAAEA,OAN4C;AAOrDoB,QAAAA,WAAW,EAAEA,WAPwC;AAQrD8B,QAAAA,WAAW,EAAEhF,KAAK,CAACe;AARkC,OAAnC,EASjBrD,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AAC5BsB,QAAAA,QAAQ,EAAE,CADkB;AAE5BrB,QAAAA,GAAG,EAAE5D,KAAK,CAAC6D,OAAN,CAAc,eAAd,CAFuB;AAG5B/E,QAAAA,KAAK,EAAE0F,aAHqB;AAI5B,uBAAe;AAJa,OAA3B,CATiB,EAchBjB,WAAW,GAAGA,WAAW,CAACa,OAAD,CAAd,GAA0BA,OAdrB,EAc8B1G,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AAC3EsB,QAAAA,QAAQ,EAAE,CADiE;AAE3ErB,QAAAA,GAAG,EAAE5D,KAAK,CAAC6D,OAAN,CAAc,aAAd,CAFsE;AAG3E/E,QAAAA,KAAK,EAAE0F,aAHoE;AAI3E,uBAAe;AAJ4D,OAA3B,CAd9B,CAApB;AAoBA,aAAO9G,KAAK,CAACiG,aAAN,CAAoB7F,OAApB,EAA6B;AAClCgH,QAAAA,GAAG,EAAE,QAD6B;AAElCI,QAAAA,QAAQ,EAAE,SAFwB;AAGlCC,QAAAA,OAAO,EAAEnF,KAAK,CAACG,cAHmB;AAIlCwE,QAAAA,cAAc,EAAEA,cAJkB;AAKlCS,QAAAA,SAAS,EAAE,EALuB;AAMlCC,QAAAA,gBAAgB,EAAE;AANgB,OAA7B,EAOJvD,OAAO,IAAI,CAACwB,cAAZ,GAA6BuB,aAA7B,GAA6C,IAPzC,CAAP;AAQD,KA7GD;;AA+GA7E,IAAAA,KAAK,CAACsF,cAAN,GAAuB,YAAY;AACjC,UAAIxG,KAAK,GAAG,EAAZ;AACA,UAAIyG,MAAM,GAAGvF,KAAK,CAACD,KAAN,CAAYwF,MAAzB;;AAEA,UAAIA,MAAM,KAAK9B,SAAf,EAA0B;AACxB3E,QAAAA,KAAK,CAACyG,MAAN,GAAeA,MAAf;AACD;;AAED,aAAOzG,KAAP;AACD,KATD;;AAWAkB,IAAAA,KAAK,CAACwF,YAAN,GAAqB,YAAY;AAC/B,aAAOnI,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK2C,KAAK,CAACsF,cAAN,EAAL,CAAd,EAA4CtF,KAAK,CAACD,KAAN,CAAY0F,SAAxD,CAApB;AACD,KAFD;;AAIAzF,IAAAA,KAAK,CAAC0F,YAAN,GAAqB,YAAY;AAC/B,aAAOrI,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK2C,KAAK,CAACsF,cAAN,EAAL,CAAd,EAA4CtF,KAAK,CAACD,KAAN,CAAY4F,SAAxD,CAApB;AACD,KAFD;;AAIA3F,IAAAA,KAAK,CAAC4F,cAAN,GAAuB,YAAY;AACjC,UAAIC,YAAY,GAAG7F,KAAK,CAACD,KAAzB;AAAA,UACIS,IAAI,GAAGqF,YAAY,CAACrF,IADxB;AAAA,UAEImC,SAAS,GAAGkD,YAAY,CAAClD,SAF7B;AAAA,UAGIb,OAAO,GAAG+D,YAAY,CAAC/D,OAH3B;AAAA,UAIIgE,SAAS,GAAGD,YAAY,CAACC,SAJ7B;AAKA,UAAIC,WAAJ;;AAEA,UAAIvF,IAAJ,EAAU;AACR,YAAIwF,cAAc,GAAGhG,KAAK,CAACiG,qBAAN,EAArB;;AAEAF,QAAAA,WAAW,GAAGrI,KAAK,CAACiG,aAAN,CAAoB5F,aAApB,EAAmCsG,MAAM,CAACC,MAAP,CAAc;AAC7DxF,UAAAA,KAAK,EAAEkB,KAAK,CAAC0F,YAAN,EADsD;AAE7DZ,UAAAA,GAAG,EAAE,MAFwD;AAG7D7B,UAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,OAArB,CAHkD;AAI7DuD,UAAAA,eAAe,EAAE,GAAG7H,MAAH,CAAUsE,SAAV,EAAqB,cAArB,CAJ4C;AAK7Db,UAAAA,OAAO,EAAEA;AALoD,SAAd,EAM9CgE,SAN8C,CAAnC,CAAd;;AAQA,YAAIE,cAAJ,EAAoB;AAClBD,UAAAA,WAAW,GAAGrI,KAAK,CAACiG,aAAN,CAAoB7F,OAApB,EAA6B;AACzCgH,YAAAA,GAAG,EAAE,MADoC;AAEzCI,YAAAA,QAAQ,EAAE,SAF+B;AAGzCG,YAAAA,gBAAgB,EAAE,IAHuB;AAIzCD,YAAAA,SAAS,EAAE,EAJ8B;AAKzCT,YAAAA,cAAc,EAAEqB;AALyB,WAA7B,EAMXD,WANW,CAAd;AAOD;AACF;;AAED,aAAOA,WAAP;AACD,KA/BD;;AAiCA/F,IAAAA,KAAK,CAACiG,qBAAN,GAA8B,YAAY;AACxC,UAAIE,YAAY,GAAGnG,KAAK,CAACD,KAAzB;AAAA,UACIqG,kBAAkB,GAAGD,YAAY,CAACC,kBADtC;AAAA,UAEIC,aAAa,GAAGF,YAAY,CAACE,aAFjC;AAAA,UAGI1D,SAAS,GAAGwD,YAAY,CAACxD,SAH7B;AAIA,UAAIgC,cAAc,GAAGyB,kBAArB;AACA,UAAIE,SAAS,GAAGD,aAAhB;;AAEA,UAAI,CAAC1B,cAAD,IAAmB2B,SAAvB,EAAkC;AAChC3B,QAAAA,cAAc,GAAG,GAAGtG,MAAH,CAAUsE,SAAV,EAAqB,GAArB,EAA0BtE,MAA1B,CAAiCiI,SAAjC,CAAjB;AACD;;AAED,aAAO3B,cAAP;AACD,KAbD;;AAeA3E,IAAAA,KAAK,CAAC4E,iBAAN,GAA0B,YAAY;AACpC,UAAI2B,YAAY,GAAGvG,KAAK,CAACD,KAAzB;AAAA,UACI4E,cAAc,GAAG4B,YAAY,CAAC5B,cADlC;AAAA,UAEI2B,SAAS,GAAGC,YAAY,CAACD,SAF7B;AAAA,UAGI3D,SAAS,GAAG4D,YAAY,CAAC5D,SAH7B;AAIA,UAAI6D,oBAAoB,GAAG7B,cAA3B;;AAEA,UAAI,CAACA,cAAD,IAAmB2B,SAAvB,EAAkC;AAChCE,QAAAA,oBAAoB,GAAG,GAAGnI,MAAH,CAAUsE,SAAV,EAAqB,GAArB,EAA0BtE,MAA1B,CAAiCiI,SAAjC,CAAvB;AACD;;AAED,aAAOE,oBAAP;AACD,KAZD;;AAcAxG,IAAAA,KAAK,CAAC0B,KAAN,GAAc,UAAUZ,CAAV,EAAa;AACzB,UAAI2F,OAAO,GAAGzG,KAAK,CAACD,KAAN,CAAY0G,OAA1B;;AAEA,UAAIA,OAAJ,EAAa;AACXA,QAAAA,OAAO,CAAC3F,CAAD,CAAP;AACD;AACF,KAND;;AAQAd,IAAAA,KAAK,CAAC6D,OAAN,GAAgB,UAAU6C,IAAV,EAAgB;AAC9B,aAAO,UAAU9H,IAAV,EAAgB;AACrBoB,QAAAA,KAAK,CAAC0G,IAAD,CAAL,GAAc9H,IAAd;AACD,OAFD;AAGD,KAJD;;AAMAoB,IAAAA,KAAK,CAACgE,OAAN,GAAgB,gBAAgB3F,MAAhB,CAAuBL,IAAvB,CAAhB;AACAA,IAAAA,IAAI,IAAI,CAAR;;AAEAgC,IAAAA,KAAK,CAACW,qBAAN,GAA8BZ,KAAK,CAACY,qBAAN,IAA+B,YAAY,CAAE,CAA3E;;AAEA,WAAOX,KAAP;AACD;;AAEDzC,EAAAA,YAAY,CAACqC,MAAD,EAAS,CAAC;AACpBkF,IAAAA,GAAG,EAAE,mBADe;AAEpBjG,IAAAA,KAAK,EAAE,SAAS8H,iBAAT,GAA6B;AAClC,WAAKC,kBAAL,CAAwB,EAAxB,EADkC,CACL;;AAE7B,UAAI,KAAK7G,KAAL,CAAWmD,WAAX,IAA0B,KAAKnD,KAAL,CAAW+B,OAAzC,EAAkD;AAChD;AACD;;AAED,UAAI,CAAC,KAAK/B,KAAL,CAAWmD,WAAX,IAA0B,KAAKnD,KAAL,CAAW8G,YAAX,KAA4B,KAA5B,IAAqC,CAAC,KAAK9G,KAAL,CAAW+B,OAA5E,KAAwF,KAAKrB,IAAjG,EAAuG;AACrG,aAAKA,IAAL,CAAU3B,KAAV,CAAgB4B,OAAhB,GAA0B,MAA1B;AACD;AACF;AAZmB,GAAD,EAalB;AACDoE,IAAAA,GAAG,EAAE,oBADJ;AAEDjG,IAAAA,KAAK,EAAE,SAAS+H,kBAAT,CAA4BE,SAA5B,EAAuC;AAC5C,UAAIC,YAAY,GAAG,KAAKhH,KAAxB;AAAA,UACI+B,OAAO,GAAGiF,YAAY,CAACjF,OAD3B;AAAA,UAEIkF,aAAa,GAAGD,YAAY,CAACC,aAFjC;;AAIA,UAAIlF,OAAJ,EAAa;AACX;AACA,YAAI,CAACgF,SAAS,CAAChF,OAAf,EAAwB;AACtB,eAAKP,QAAL,GAAgBF,IAAI,CAACC,GAAL,EAAhB;AACA,eAAKX,qBAAL;AACA,eAAKsG,QAAL,GAHsB,CAGL;;AAEjB,cAAIC,UAAU,GAAGvJ,QAAQ,CAACwJ,WAAT,CAAqB,KAAKC,MAA1B,CAAjB;;AAEA,cAAIJ,aAAJ,EAAmB;AACjB,gBAAIK,QAAQ,GAAGnI,MAAM,CAACgI,UAAD,CAArB;AACAvI,YAAAA,kBAAkB,CAACuI,UAAD,EAAa,GAAG7I,MAAH,CAAU2I,aAAa,CAACM,CAAd,GAAkBD,QAAQ,CAAC9H,IAArC,EAA2C,KAA3C,EAAkDlB,MAAlD,CAAyD2I,aAAa,CAACO,CAAd,GAAkBF,QAAQ,CAAClJ,GAApF,EAAyF,IAAzF,CAAb,CAAlB;AACD,WAHD,MAGO;AACLQ,YAAAA,kBAAkB,CAACuI,UAAD,EAAa,EAAb,CAAlB;AACD;AACF;AACF,OAhBD,MAgBO,IAAIJ,SAAS,CAAChF,OAAd,EAAuB;AAC5B,aAAK5B,YAAL,GAAoB,IAApB;AACD;AACF;AA1BA,GAbkB,EAwClB;AACD4E,IAAAA,GAAG,EAAE,sBADJ;AAEDjG,IAAAA,KAAK,EAAE,SAAS2I,oBAAT,GAAgC;AACrC,UAAIC,YAAY,GAAG,KAAK1H,KAAxB;AAAA,UACI+B,OAAO,GAAG2F,YAAY,CAAC3F,OAD3B;AAAA,UAEIxB,YAAY,GAAGmH,YAAY,CAACnH,YAFhC;;AAIA,UAAI,CAACwB,OAAO,IAAI,KAAK5B,YAAjB,KAAkC,CAACI,YAAY,EAAnD,EAAuD;AACrD,aAAKK,qBAAL;AACD;;AAED+G,MAAAA,YAAY,CAAC,KAAKxG,SAAN,CAAZ;AACD;AAZA,GAxCkB,EAqDlB;AACD4D,IAAAA,GAAG,EAAE,UADJ;AAEDjG,IAAAA,KAAK,EAAE,SAASoI,QAAT,GAAoB;AACzB,UAAI,CAACpJ,QAAQ,CAAC,KAAK4C,IAAN,EAAYjC,QAAQ,CAAC4D,aAArB,CAAb,EAAkD;AAChD,aAAKxB,oBAAL,GAA4BpC,QAAQ,CAAC4D,aAArC;AACA,aAAKE,aAAL,CAAmBzB,KAAnB;AACD;AACF;AAPA,GArDkB,EA6DlB;AACDiE,IAAAA,GAAG,EAAE,QADJ;AAEDjG,IAAAA,KAAK,EAAE,SAAS8I,MAAT,GAAkB;AACvB,UAAI5H,KAAK,GAAG,KAAKA,KAAjB;AACA,UAAI4C,SAAS,GAAG5C,KAAK,CAAC4C,SAAtB;AAAA,UACIiF,YAAY,GAAG7H,KAAK,CAAC6H,YADzB;AAEA,UAAI9I,KAAK,GAAG,KAAK0G,YAAL,EAAZ,CAJuB,CAIU;AACjC;;AAEA,UAAIzF,KAAK,CAAC+B,OAAV,EAAmB;AACjBhD,QAAAA,KAAK,CAAC4B,OAAN,GAAgB,IAAhB;AACD;;AAED,aAAOhD,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2B;AAChCV,QAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,OAArB;AADqB,OAA3B,EAEJ,KAAKiD,cAAL,EAFI,EAEmBlI,KAAK,CAACiG,aAAN,CAAoB,KAApB,EAA2BU,MAAM,CAACC,MAAP,CAAc;AACjEW,QAAAA,QAAQ,EAAE,CAAC,CADsD;AAEjEtD,QAAAA,SAAS,EAAE,KAAKA,SAFiD;AAGjEsB,QAAAA,SAAS,EAAE,GAAG5E,MAAH,CAAUsE,SAAV,EAAqB,QAArB,EAA+BtE,MAA/B,CAAsC0B,KAAK,CAAC8H,aAAN,IAAuB,EAA7D,CAHsD;AAIjEjE,QAAAA,GAAG,EAAE,KAAKC,OAAL,CAAa,MAAb,CAJ4D;AAKjEM,QAAAA,OAAO,EAAEyD,YAAY,GAAG,KAAKxG,WAAR,GAAsB,IALsB;AAMjE0G,QAAAA,SAAS,EAAEF,YAAY,GAAG,KAAK3G,aAAR,GAAwB,IANkB;AAOjE8D,QAAAA,IAAI,EAAE,QAP2D;AAQjE,2BAAmBhF,KAAK,CAACgD,KAAN,GAAc,KAAKiB,OAAnB,GAA6B,IARiB;AASjElF,QAAAA,KAAK,EAAEA;AAT0D,OAAd,EAUlDiB,KAAK,CAACgI,SAV4C,CAA3B,EAUL,KAAKvF,gBAAL,EAVK,CAFnB,CAAP;AAaD;AA1BA,GA7DkB,CAAT,CAAZ;;AA0FA,SAAO5C,MAAP;AACD,CArZyB,CAqZxBlC,KAAK,CAACsK,SArZkB,CAA1B;;AAuZA,SAASpI,MAAM,IAAIqI,OAAnB;AACArI,MAAM,CAACsI,YAAP,GAAsB;AACpBjF,EAAAA,SAAS,EAAE,EADS;AAEpBzC,EAAAA,IAAI,EAAE,IAFc;AAGpBsB,EAAAA,OAAO,EAAE,KAHW;AAIpBD,EAAAA,QAAQ,EAAE,IAJU;AAKpBa,EAAAA,QAAQ,EAAE,IALU;AAMpBkF,EAAAA,YAAY,EAAE,IANM;AAOpBtE,EAAAA,cAAc,EAAE,KAPI;AAQpBX,EAAAA,SAAS,EAAE,WARS;AASpBpC,EAAAA,sBAAsB,EAAE;AATJ,CAAtB","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport contains from \"rc-util/es/Dom/contains\";\nimport Animate from 'rc-animate';\nimport LazyRenderBox from './LazyRenderBox';\nvar uuid = 0;\n/* eslint react/no-is-mounted:0 */\n\nfunction getScroll(w, top) {\n  var ret = w[\"page\".concat(top ? 'Y' : 'X', \"Offset\")];\n  var method = \"scroll\".concat(top ? 'Top' : 'Left');\n\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    ret = d.documentElement[method];\n\n    if (typeof ret !== 'number') {\n      ret = d.body[method];\n    }\n  }\n\n  return ret;\n}\n\nfunction setTransformOrigin(node, value) {\n  var style = node.style;\n  ['Webkit', 'Moz', 'Ms', 'ms'].forEach(function (prefix) {\n    style[\"\".concat(prefix, \"TransformOrigin\")] = value;\n  });\n  style.transformOrigin = value;\n}\n\nfunction offset(el) {\n  var rect = el.getBoundingClientRect();\n  var pos = {\n    left: rect.left,\n    top: rect.top\n  };\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScroll(w);\n  pos.top += getScroll(w, true);\n  return pos;\n}\n\nvar Dialog = /*#__PURE__*/function (_React$Component) {\n  _inherits(Dialog, _React$Component);\n\n  var _super = _createSuper(Dialog);\n\n  function Dialog(props) {\n    var _this;\n\n    _classCallCheck(this, Dialog);\n\n    _this = _super.call(this, props);\n    _this.inTransition = false;\n\n    _this.onAnimateLeave = function () {\n      var _this$props = _this.props,\n          afterClose = _this$props.afterClose,\n          getOpenCount = _this$props.getOpenCount,\n          focusTriggerAfterClose = _this$props.focusTriggerAfterClose,\n          mask = _this$props.mask; // need demo?\n      // https://github.com/react-component/dialog/pull/28\n\n      if (_this.wrap) {\n        _this.wrap.style.display = 'none';\n      }\n\n      _this.inTransition = false; // 如果没有打开的状态，则清除 effect 和 overflow: hidden;\n      // https://github.com/ant-design/ant-design/issues/21539\n\n      if (!getOpenCount()) {\n        _this.switchScrollingEffect();\n      }\n\n      if (mask && _this.lastOutSideFocusNode && focusTriggerAfterClose) {\n        try {\n          _this.lastOutSideFocusNode.focus();\n        } catch (e) {\n          _this.lastOutSideFocusNode = null;\n        }\n\n        _this.lastOutSideFocusNode = null;\n      }\n\n      if (afterClose) {\n        afterClose();\n      }\n    };\n\n    _this.onDialogMouseDown = function () {\n      _this.dialogMouseDown = true;\n    };\n\n    _this.onMaskMouseUp = function () {\n      if (_this.dialogMouseDown) {\n        _this.timeoutId = setTimeout(function () {\n          _this.dialogMouseDown = false;\n        }, 0);\n      }\n    };\n\n    _this.onMaskClick = function (e) {\n      // android trigger click on open (fastclick??)\n      if (Date.now() - _this.openTime < 300) {\n        return;\n      }\n\n      if (e.target === e.currentTarget && !_this.dialogMouseDown) {\n        _this.close(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      var _this$props2 = _this.props,\n          keyboard = _this$props2.keyboard,\n          visible = _this$props2.visible;\n\n      if (keyboard && e.keyCode === KeyCode.ESC) {\n        e.stopPropagation();\n\n        _this.close(e);\n\n        return;\n      } // keep focus inside dialog\n\n\n      if (visible) {\n        if (e.keyCode === KeyCode.TAB) {\n          var _document = document,\n              activeElement = _document.activeElement;\n\n          if (e.shiftKey) {\n            if (activeElement === _this.sentinelStart) {\n              _this.sentinelEnd.focus();\n            }\n          } else if (activeElement === _this.sentinelEnd) {\n            _this.sentinelStart.focus();\n          }\n        }\n      }\n    };\n\n    _this.getDialogElement = function () {\n      var _this$props3 = _this.props,\n          closable = _this$props3.closable,\n          prefixCls = _this$props3.prefixCls,\n          width = _this$props3.width,\n          height = _this$props3.height,\n          footer = _this$props3.footer,\n          title = _this$props3.title,\n          closeIcon = _this$props3.closeIcon,\n          style = _this$props3.style,\n          className = _this$props3.className,\n          visible = _this$props3.visible,\n          forceRender = _this$props3.forceRender,\n          bodyStyle = _this$props3.bodyStyle,\n          bodyProps = _this$props3.bodyProps,\n          children = _this$props3.children,\n          destroyOnClose = _this$props3.destroyOnClose,\n          modalRender = _this$props3.modalRender;\n      var dest = {};\n\n      if (width !== undefined) {\n        dest.width = width;\n      }\n\n      if (height !== undefined) {\n        dest.height = height;\n      }\n\n      var footerNode;\n\n      if (footer) {\n        footerNode = React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-footer\"),\n          ref: _this.saveRef('footer')\n        }, footer);\n      }\n\n      var headerNode;\n\n      if (title) {\n        headerNode = React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-header\"),\n          ref: _this.saveRef('header')\n        }, React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-title\"),\n          id: _this.titleId\n        }, title));\n      }\n\n      var closer;\n\n      if (closable) {\n        closer = React.createElement(\"button\", {\n          type: \"button\",\n          onClick: _this.close,\n          \"aria-label\": \"Close\",\n          className: \"\".concat(prefixCls, \"-close\")\n        }, closeIcon || React.createElement(\"span\", {\n          className: \"\".concat(prefixCls, \"-close-x\")\n        }));\n      }\n\n      var content = React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content\")\n      }, closer, headerNode, React.createElement(\"div\", Object.assign({\n        className: \"\".concat(prefixCls, \"-body\"),\n        style: bodyStyle,\n        ref: _this.saveRef('body')\n      }, bodyProps), children), footerNode);\n\n      var styleBox = _objectSpread(_objectSpread({}, style), dest);\n\n      var sentinelStyle = {\n        width: 0,\n        height: 0,\n        overflow: 'hidden',\n        outline: 'none'\n      };\n\n      var transitionName = _this.getTransitionName();\n\n      var dialogElement = React.createElement(LazyRenderBox, {\n        key: \"dialog-element\",\n        role: \"document\",\n        ref: _this.saveRef('dialog'),\n        style: styleBox,\n        className: \"\".concat(prefixCls, \" \").concat(className || ''),\n        visible: visible,\n        forceRender: forceRender,\n        onMouseDown: _this.onDialogMouseDown\n      }, React.createElement(\"div\", {\n        tabIndex: 0,\n        ref: _this.saveRef('sentinelStart'),\n        style: sentinelStyle,\n        \"aria-hidden\": \"true\"\n      }), modalRender ? modalRender(content) : content, React.createElement(\"div\", {\n        tabIndex: 0,\n        ref: _this.saveRef('sentinelEnd'),\n        style: sentinelStyle,\n        \"aria-hidden\": \"true\"\n      }));\n      return React.createElement(Animate, {\n        key: \"dialog\",\n        showProp: \"visible\",\n        onLeave: _this.onAnimateLeave,\n        transitionName: transitionName,\n        component: \"\",\n        transitionAppear: true\n      }, visible || !destroyOnClose ? dialogElement : null);\n    };\n\n    _this.getZIndexStyle = function () {\n      var style = {};\n      var zIndex = _this.props.zIndex;\n\n      if (zIndex !== undefined) {\n        style.zIndex = zIndex;\n      }\n\n      return style;\n    };\n\n    _this.getWrapStyle = function () {\n      return _objectSpread(_objectSpread({}, _this.getZIndexStyle()), _this.props.wrapStyle);\n    };\n\n    _this.getMaskStyle = function () {\n      return _objectSpread(_objectSpread({}, _this.getZIndexStyle()), _this.props.maskStyle);\n    };\n\n    _this.getMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible,\n          maskProps = _this$props4.maskProps;\n      var maskElement;\n\n      if (mask) {\n        var maskTransition = _this.getMaskTransitionName();\n\n        maskElement = React.createElement(LazyRenderBox, Object.assign({\n          style: _this.getMaskStyle(),\n          key: \"mask\",\n          className: \"\".concat(prefixCls, \"-mask\"),\n          hiddenClassName: \"\".concat(prefixCls, \"-mask-hidden\"),\n          visible: visible\n        }, maskProps));\n\n        if (maskTransition) {\n          maskElement = React.createElement(Animate, {\n            key: \"mask\",\n            showProp: \"visible\",\n            transitionAppear: true,\n            component: \"\",\n            transitionName: maskTransition\n          }, maskElement);\n        }\n      }\n\n      return maskElement;\n    };\n\n    _this.getMaskTransitionName = function () {\n      var _this$props5 = _this.props,\n          maskTransitionName = _this$props5.maskTransitionName,\n          maskAnimation = _this$props5.maskAnimation,\n          prefixCls = _this$props5.prefixCls;\n      var transitionName = maskTransitionName;\n      var animation = maskAnimation;\n\n      if (!transitionName && animation) {\n        transitionName = \"\".concat(prefixCls, \"-\").concat(animation);\n      }\n\n      return transitionName;\n    };\n\n    _this.getTransitionName = function () {\n      var _this$props6 = _this.props,\n          transitionName = _this$props6.transitionName,\n          animation = _this$props6.animation,\n          prefixCls = _this$props6.prefixCls;\n      var transitionNameResult = transitionName;\n\n      if (!transitionName && animation) {\n        transitionNameResult = \"\".concat(prefixCls, \"-\").concat(animation);\n      }\n\n      return transitionNameResult;\n    };\n\n    _this.close = function (e) {\n      var onClose = _this.props.onClose;\n\n      if (onClose) {\n        onClose(e);\n      }\n    };\n\n    _this.saveRef = function (name) {\n      return function (node) {\n        _this[name] = node;\n      };\n    };\n\n    _this.titleId = \"rcDialogTitle\".concat(uuid);\n    uuid += 1;\n\n    _this.switchScrollingEffect = props.switchScrollingEffect || function () {};\n\n    return _this;\n  }\n\n  _createClass(Dialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate({}); // if forceRender is true, set element style display to be none;\n\n      if (this.props.forceRender && this.props.visible) {\n        return;\n      }\n\n      if ((this.props.forceRender || this.props.getContainer === false && !this.props.visible) && this.wrap) {\n        this.wrap.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props7 = this.props,\n          visible = _this$props7.visible,\n          mousePosition = _this$props7.mousePosition;\n\n      if (visible) {\n        // first show\n        if (!prevProps.visible) {\n          this.openTime = Date.now();\n          this.switchScrollingEffect();\n          this.tryFocus(); // eslint-disable-next-line react/no-find-dom-node\n\n          var dialogNode = ReactDOM.findDOMNode(this.dialog);\n\n          if (mousePosition) {\n            var elOffset = offset(dialogNode);\n            setTransformOrigin(dialogNode, \"\".concat(mousePosition.x - elOffset.left, \"px \").concat(mousePosition.y - elOffset.top, \"px\"));\n          } else {\n            setTransformOrigin(dialogNode, '');\n          }\n        }\n      } else if (prevProps.visible) {\n        this.inTransition = true;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props8 = this.props,\n          visible = _this$props8.visible,\n          getOpenCount = _this$props8.getOpenCount;\n\n      if ((visible || this.inTransition) && !getOpenCount()) {\n        this.switchScrollingEffect();\n      }\n\n      clearTimeout(this.timeoutId);\n    }\n  }, {\n    key: \"tryFocus\",\n    value: function tryFocus() {\n      if (!contains(this.wrap, document.activeElement)) {\n        this.lastOutSideFocusNode = document.activeElement;\n        this.sentinelStart.focus();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n      var prefixCls = props.prefixCls,\n          maskClosable = props.maskClosable;\n      var style = this.getWrapStyle(); // clear hide display\n      // and only set display after async anim, not here for hide\n\n      if (props.visible) {\n        style.display = null;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-root\")\n      }, this.getMaskElement(), React.createElement(\"div\", Object.assign({\n        tabIndex: -1,\n        onKeyDown: this.onKeyDown,\n        className: \"\".concat(prefixCls, \"-wrap \").concat(props.wrapClassName || ''),\n        ref: this.saveRef('wrap'),\n        onClick: maskClosable ? this.onMaskClick : null,\n        onMouseUp: maskClosable ? this.onMaskMouseUp : null,\n        role: \"dialog\",\n        \"aria-labelledby\": props.title ? this.titleId : null,\n        style: style\n      }, props.wrapProps), this.getDialogElement()));\n    }\n  }]);\n\n  return Dialog;\n}(React.Component);\n\nexport { Dialog as default };\nDialog.defaultProps = {\n  className: '',\n  mask: true,\n  visible: false,\n  keyboard: true,\n  closable: true,\n  maskClosable: true,\n  destroyOnClose: false,\n  prefixCls: 'rc-dialog',\n  focusTriggerAfterClose: true\n};"]},"metadata":{},"sourceType":"module"}